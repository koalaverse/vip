<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>How to update a released site</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">How to update a released site</h1>



<div id="checklist" class="section level2">
<h2>Checklist</h2>
<p>If you’re already up-to-speed, here’s the checklist:</p>
<ul>
<li><p>Make sure your dev site looks the way you want before embarking
on an update of your released site. Here are good instructions for
updating an existing site for pkgdown 2.0.0, Bootstrap 5, and
“tidyverse/tidytemplate” (only applies to certain packages):<br />
<a href="https://tidytemplate.tidyverse.org" class="uri">https://tidytemplate.tidyverse.org</a></p></li>
<li><p>Make sure you are using automatic development mode. In
<code>_pkgdown.yml</code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">development</span><span class="kw">:</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">mode</span><span class="kw">:</span><span class="at"> auto</span></span></code></pre></div></li>
<li><p>Push/pull to sync your default branch.</p></li>
<li><p>Create and checkout a branch based on the tag of your most recent
GitHub/CRAN release.</p>
<p>Example for readr, whose latest release is 2.1.1:<br />
<code>git checkout -b update-pkgdown-2-1-1 v2.1.1</code></p>
<p>General pattern:<br />
<code>git checkout -b NEW-BRANCH-NAME NAME-OF-RELEASE-TAG</code></p></li>
<li><p>Backport innovations from the future. Example of a useful opening
move:<br />
<code>git checkout main -- _pkgdown.yml .github/workflows/pkgdown.yaml</code></p>
<p>Most likely candidates:</p>
<ul>
<li><code>_pkgdown.yml</code></li>
<li><code>.github/workflows/pkgdown.yaml</code></li>
<li><code>Config/Needs/website: tidyverse/tidytemplate</code> in
DESCRIPTION</li>
<li>Any fixes to <code>README.Rmd</code> / <code>README.md</code> or
released roxygen comments. Don’t forget to
<code>devtools::build_readme()</code> or
<code>devtools::document()</code>, in that case.</li>
</ul>
<p>These are the two main Git commands you’ll need:</p>
<pre><code>git checkout REF -- path/to/a/specific/file
git cherry-pick SHA</code></pre></li>
<li><p>Monitor your progress locally with
<code>pkgdown::build_site()</code>.</p></li>
<li><p>Push this branch, maybe using <code>usethis::pr_push()</code>.
Don’t bother opening a pull request (the branch will still be created
and pushed).</p></li>
<li><p>Go to your package’s GHA page, maybe using
<code>usethis::browse_github_actions()</code>. Select the pkgdown
workflow. Click <em>Run workflow</em> and select the branch you just
pushed. If there’s no dropdown menu for this, that means your pkgdown
workflow config is not current.</p></li>
<li><p>Scrutinize your newly published <strong>released</strong> site
and make sure things look right.</p></li>
<li><p>You can let this branch sit around for a while, in case you need
to iterate on this or if you’d like to backport more niceties before
your next CRAN release. Or you can delete immediately, if you’re happy
with the released site.</p></li>
</ul>
</div>
<div id="context" class="section level2">
<h2>Context</h2>
<p>Before we talk about <strong>how</strong> to update a released site,
we first establish <strong>why</strong> you might need to do this. What
is a released site? What other kind of pkgdown site could you have? Why
does updating a released site take special effort?</p>
<div id="automatic-development-mode" class="section level3">
<h3>Automatic development mode</h3>
<p>Every pkgdown site has a so-called <a href="https://pkgdown.r-lib.org/reference/build_site.html#development-mode"><em>development
mode</em></a>, which can be specified via the <code>development</code>
field in <code>_pkgdown.yml</code>. If unspecified, the default is
<code>mode: release</code>, which results in a single pkgdown site.
Despite the name, this single site reflects “the current package state”,
which could be either a released state or a development state.</p>
<p>For packages with a substantial user base, it is recommended instead
to specify <code>mode: auto</code> like so:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">development</span><span class="kw">:</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">mode</span><span class="kw">:</span><span class="at"> auto</span></span></code></pre></div>
<p>This directs pkgdown to “generate different sites for the development
and released versions of your package.”</p>
<p>The readr package demonstrates what happens in automatic development
mode:</p>
<p><a href="https://readr.tidyverse.org">readr.tidyverse.org</a>
documents the released version, i.e. what
<code>install.packages()</code> would deliver.<br />
<a href="https://readr.tidyverse.org/dev/">readr.tidyverse.org/dev/</a>
documents the dev version, i.e. what you’d get by installing from
GitHub.</p>
<p>In this mode, <code>pkgdown::build_site()</code>, consults
DESCRIPTION to learn the package’s version number. For a development
version number, the rendered site is written to <code>docs/dev/</code>.
For a released version number, the site is written to
<code>docs/</code>. (There are also other signals to alert users that
they are reading documentation for a dev version vs. a released
version.)</p>
<p>Automatic development mode is recommended for packages with a broad
user base, because it maximizes the chance that a user will read
web-based documentation that reflects the package version that is
locally installed.</p>
</div>
<div id="publishing" class="section level3">
<h3>Publishing</h3>
<p>Now that we’ve established the meaning of a released (vs dev) site,
we have to consider how the site gets rendered and deployed.</p>
<p>Many people use <code>usethis::use_pkgdown_github_pages()</code> to
do basic pkgdown setup and configure a GitHub Actions (GHA) workflow to
automatically render and publish the site to GitHub Pages. Here’s an
overview of what this function does:</p>
<pre><code>usethis::use_pkgdown_github_pages() =
  use_pkgdown() +
  use_github_pages() + 
  use_github_action(&quot;pkgdown&quot;) +
  add the pkgdown site&#39;s URL to _pkgdown.yml, URL field of DESCRIPTION,
    and to the GitHub repo +
  (if owning org is one of: tidyverse, r-lib, tidymodels, rstudio) 
  add &quot;tidyverse/tidytemplate&quot; to Config/Needs/website in DESCRIPTION</code></pre>
<p>As a result, the publishing cadence of many pkgdown sites is governed
by the workflow maintained at <a href="https://github.com/r-lib/actions/blob/v2/examples/pkgdown.yaml"><code>r-lib/actions/examples/pkgdown.yaml</code></a>.
(Do not confuse <code>_pkgdown.yml</code>, which gives instructions to
the pkgdown package, with <code>.github/workflows/pkgdown.yaml</code>,
which gives instructions to GHA.)</p>
<p>Here are some of the most important bits of the GHA workflow
config:</p>
<p><em>NOTE: this is from v2 of <code>r-lib/actions</code>, which is
important! If you use usethis to add/update workflow config, make sure
you’re using the dev version of usethis, which will pull from the
<code>v2</code> tag.</em></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">main</span><span class="kw">,</span><span class="at"> master</span><span class="kw">]</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pull_request</span><span class="kw">:</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">main</span><span class="kw">,</span><span class="at"> master</span><span class="kw">]</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">release</span><span class="kw">:</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">types</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">published</span><span class="kw">]</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">workflow_dispatch</span><span class="kw">:</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="at">&lt;snip, snip&gt;</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build site</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> Rscript -e &#39;pkgdown::build_site_github_pages(...)&#39;</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="at">        </span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Deploy to GitHub pages 🚀</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">if</span><span class="kw">:</span><span class="at"> github.event_name != &#39;pull_request&#39;</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> JamesIves/github-pages-deploy-action@4.1.4</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="at">        </span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="at">        &lt;snip, snip&gt;</span></span></code></pre></div>
<p>We build and deploy for pushes to <code>main</code> (or
<code>master</code>).<br />
We build for pull requests against <code>main</code> (or
<code>master</code>).<br />
But we don’t deploy for pull requests.</p>
<p>We build and deploy when we publish a GitHub release.<br />
By convention, we assume that a GitHub release coincides with a CRAN
release.<br />
<strong>This is the primary mechanism for building the released pkgdown
site.</strong></p>
<p><code>pkgdown::build_site_github_pages()</code> consults the version
in DESCRIPTION to detect whether it’s building from a released version
or a dev version. That determines the <code>dest_dir</code>,
e.g. <code>docs/</code> for released and <code>docs/dev/</code> for dev.
For a package in automatic development mode, this means that almost all
of your pushes trigger an update to the dev site. The released site is
only updated when you push a state with a non-development version number
or when you publish a GitHub release.</p>
<p>So how do you tweak things about the released site <em>in
between</em> releases?</p>
<p>That brings us to <code>workflow_dispatch:</code>. (Yes that dangling
colon is correct.)</p>
<p>The inclusion of <code>workflow_dispatch</code> as a trigger means
the pkgdown workflow can be run on demand, either manually from the
browser or via the GitHub REST API. We’re going to show how to update a
released site from a GitHub branch or tag, using the browser method. In
the future, we might build some tooling around the API method.</p>
<p>Places to learn more about triggering GHA workflows:</p>
<ul>
<li><a href="https://docs.github.com/en/actions/learn-github-actions/events-that-trigger-workflows#workflow_dispatch" class="uri">https://docs.github.com/en/actions/learn-github-actions/events-that-trigger-workflows#workflow_dispatch</a></li>
<li><a href="https://docs.github.com/en/actions/managing-workflow-runs/manually-running-a-workflow" class="uri">https://docs.github.com/en/actions/managing-workflow-runs/manually-running-a-workflow</a></li>
<li><a href="https://docs.github.com/en/rest/reference/actions/#create-a-workflow-dispatch-event" class="uri">https://docs.github.com/en/rest/reference/actions/#create-a-workflow-dispatch-event</a></li>
</ul>
<p>Before we move on, I repeat:<br />
It is important that your <code>main</code> branch have the latest
pkgdown workflow. (Or whatever your default branch is called.) At the
time of writing, this means the <code>v2</code> tag in
<code>r-lib/actions</code>. The easiest way to get this is to install
dev usethis and run
<code>usethis::use_github_action(&quot;pkgdown&quot;)</code>.</p>
</div>
</div>
<div id="construct-a-branch-for-the-update" class="section level2">
<h2>Construct a branch for the update</h2>
<p>The overall goal is to create a package state from which to update
the released site that corresponds to (HEAD of) a Git branch. This
package state should:</p>
<ul>
<li>Be based on the most recent GitHub and CRAN release.</li>
<li>Incorporate all desired updates to your documentation, such as
pkgdown config.</li>
</ul>
<p>Create and checkout a branch based on the tag of the most recent CRAN
release. For example, if readr’s latest release is 2.1.1:</p>
<pre><code>git checkout -b update-pkgdown-2-1-1 v2.1.1</code></pre>
<p>And here is the general pattern:</p>
<pre><code>git checkout -b NEW-BRANCH-NAME NAME-OF-RELEASE-TAG</code></pre>
<p>Now you should backport innovations from the future that you would
like to retroactively apply to your released site.</p>
<p>Files you must update:</p>
<ul>
<li><code>.github/workflows/pkgdown.yaml</code></li>
<li><code>_pkgdown.yml</code></li>
<li><code>Config/Needs/website</code> field of DESCRIPTION (And,
probably, only this field! In particular, do not mess with the version
number.)</li>
</ul>
<p>Other likely candidates:</p>
<ul>
<li><code>README.Rmd</code> + <code>README.md</code>, e.g., if you’ve
updated badges.</li>
<li>Any documentation fixes that <strong>apply to the released
version</strong>. This is the only reason to touch anything below
<code>R/</code> and even then it should only affect roxygen comments.
Don’t forget to <code>document()</code> if you do this!</li>
<li>Any new vignettes or articles that apply to the released
version.</li>
</ul>
<p>Here are some tips on backporting specific changes into this branch.
If you are lucky, there are specific commits in your default branch that
contain all the necessary changes. In that case, we can cherry pick such
a commit by its SHA:</p>
<pre><code>git cherry-pick SHA</code></pre>
<p>If that doesn’t cover everything, for each file you want to update,
identify a Git reference (meaning: a SHA, tag, or branch) where the file
is in the desired state. Checkout that specific file path from that
specific ref:</p>
<pre><code>git checkout REF -- path/to/the/file</code></pre>
<p>For example, readr recently gained a new vignette that applies to the
released version of readr, i.e. it does not document any dev-only
features or functions. Here’s how to introduce the new vignette from
HEAD of <code>main</code> into the current branch:</p>
<pre><code>git checkout main -- vignettes/column-types.Rmd</code></pre>
<p>Commit and push this new branch to GitHub.
<code>usethis::pr_push()</code> can be handy for this. Just don’t bother
opening a pull request (the branch will still be pushed).</p>
<p>Now we will use the <code>workflow_dispatch</code> GHA trigger. Go to
the Actions page of your repo, maybe via
<code>usethis::browse_github_actions()</code>. Click on the
<code>pkgdown</code> workflow.</p>
<p>You should see “This workflow has a workflow_dispatch event
trigger.”<br />
(If you don’t, that means you didn’t do one of the pre-requisites, which
is to update to <code>v2</code> of the pkgdown workflow.)</p>
<p>See the “Run workflow” button? CLICK IT. In the “Use workflow from”
dropdown menu, select the branch you’ve just made and pushed. This
should kick off a pkgdown build-and-deploy and, specifically, it should
cause updates to the <strong>released</strong> site.</p>
<p>You can keep this branch around for a while, in case you didn’t get
everything right the first time or if more things crop up that you’d
like backport to the released site, before your next CRAN release.</p>
</div>
<div id="problem-solving" class="section level2">
<h2>Problem-solving</h2>
<p>Remember GitHub search is a great way to get other people’s
<code>_pkgdown.yml</code> files in front of your eyeballs:</p>
<p>Example query: <a href="https://github.com/search?q=filename%3A_pkgdown.yml+org%3Atidyverse+org%3Ar-lib"><code>filename:_pkgdown.yml org:tidyverse org:r-lib</code></a></p>
<p>For any given <code>_pkgdown.yml</code> file on GitHub, remember that
its History and Blame can be helpful for seeing how another package’s
config has evolved over time.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
